self.addEventListener("push",function(e){let t="No payload";e.data&&(t=e.data.text());const i={body:t,icon:"/favicon.png"};e.waitUntil(self.registration.showNotification("New Notification!",i))});const n="app-shell-v2",a=["/DicodingWebIntermediate/index.html","/DicodingWebIntermediate/manifest.json","/DicodingWebIntermediate/favicon.png","/DicodingWebIntermediate/images/icon-144x144.png","/DicodingWebIntermediate/images/screenshot-desktop.png"];self.addEventListener("install",e=>{e.waitUntil(caches.open(n).then(t=>t.addAll(a)))});self.addEventListener("activate",e=>{e.waitUntil(caches.keys().then(t=>Promise.all(t.map(i=>{if(i!==n)return caches.delete(i)})))),self.clients.claim()});self.addEventListener("fetch",e=>{e.request.method==="GET"&&e.respondWith(caches.match(e.request).then(t=>t||fetch(e.request).catch(()=>{if(e.request.headers.get("accept").includes("text/html"))return new Response('<h2 style="text-align:center;margin-top:2em;">You are offline.<br>Halaman tidak tersedia.</h2>',{headers:{"Content-Type":"text/html"}})})))});
